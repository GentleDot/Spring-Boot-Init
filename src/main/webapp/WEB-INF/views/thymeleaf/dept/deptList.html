<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" lang="ko" layout:decorator="/layout/default_board">

<head>
    <meta charset="UTF-8"/>
    <meta http-equiv="Content-Type" content="text/html"/>
    <title>DEPT</title>

    <script src="/webjars/jquery/3.1.1/jquery.min.js"></script>

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="/webjars/bootstrap/3.3.7/css/bootstrap.min.css"/>

    <!-- Optional theme -->
    <link rel="stylesheet" href="/webjars/bootstrap/3.3.7/css/bootstrap-theme.min.css"/>

    <!-- Latest compiled and minified JavaScript -->
    <script src="/webjars/bootstrap/3.3.7/js/bootstrap.min.js"></script>

</head>

<body>
<div id="container">
    <header>

    </header>
    <section class="main" layout:fragment="content">
        <h1>deptList</h1>
        <div class="row">
            <div class="col-md-12">
                <a th:href="@{/dept/deptAdd.do}">Data 추가</a>
                <div>
                    <form th:action="@{/dept/deptList.do}" method="post" name="deptSearch">
                        <label for="itemDeptNo">부서번호 조회 : </label>
                        <input type="text" id="itemDeptNo" name="itemDeptNo" th:value="${deptNo}"/>
                        <input type="submit" name="searchSubmit" value="검색"/>
                        <input type="hidden" name="pageNo" th:value="${paging.pageNo}"/>
                    </form>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-12">
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>부서번호</th>
                        <th>부서명</th>
                        <th>위치</th>
                    </tr>
                    </thead>
                    <tfoot>

                    </tfoot>
                    <tbody>
                    <tr th:each="vo : ${resultList}">
                        <!--<td><a th:href="@{/dept/deptView.do?deptNo=}+${vo.deptNo}" th:text="${vo.deptNo}"></a></td>-->
                        <td><a th:href="@{/dept/deptView.do(deptNo=${vo.deptNo})}" th:text="${vo.deptNo}"></a></td>
                        <td th:text="${vo.dName}"></td>
                        <td th:text="${vo.loc}"></td>
                    </tr>
                    </tbody>
                </table>
                <div class="text-center" th:if="${resultList.isEmpty()}">
                    <span class="text-primary">입력한 부서번호의 데이터가 없습니다.</span>
                </div>
            </div>
        </div>

        <section th:fragment="paging">
            <div class="row">
                <div class="col-md-12 text-center">
                    <nav class="boardNav">
                        <ul class="pagination pagination-sm">
                            <li><a th:href="@{'javascript:goPage(' + ${paging.firstPageNo} + ')'}"><span
                                    aria-hidden="true">&laquo;&laquo;</span><span class="sr-only">처음 페이지</span></a></li>
                            <li><a th:href="@{'javascript:goPage(' + ${paging.prevPageNo} + ')'}"><span
                                    aria-hidden="true">&laquo;</span><span class="sr-only">이전 페이지</span></a></li>

                            <!--<c:forEach var="i" begin="${param.startPageNo}" end="${param.endPageNo}" step="1">
                                <c:choose>
                                    <c:when test="${i eq param.pageNo}"> <li><a class="active" href="javascript:goPage(${i})">${i}</a></li></c:when>
                                    <c:otherwise><li><a href="javascript:goPage(${i})">${i}</a></li></c:otherwise>
                                </c:choose>
                            </c:forEach>-->
                            <!--<li th:unless="${paging.pageNo.equals(i)}">
                                <a th:href="@{'javascript:goPage(' + ${i} + ')'}" th:text="${i}"></a>
                            </li>-->
                            <li th:each="i : ${#numbers.sequence(paging.startPageNo, paging.endPageNo)}">
                                <a th:if="${paging.pageNo.equals(i)}" style="color:#a20; font-weight: bold"
                                   th:href="@{'javascript:goPage(' + ${i} + ')'}" th:text="${i}">
                                    <span class="sr-only">(현재 페이지)</span>
                                </a>
                                <a th:unless="${paging.pageNo.equals(i)}" th:href="@{'javascript:goPage(' + ${i} + ')'}"
                                   th:text="${i}"></a>
                            </li>

                            <li>
                                <a th:href="@{'javascript:goPage(' + ${paging.nextPageNo} + ')'}"><span
                                        aria-hidden="true">&raquo;</span><span class="sr-only">다음 페이지</span></a>
                            </li>
                            <li>
                                <a th:href="@{'javascript:goPage(' + ${paging.finalPageNo} + ')'}"><span
                                        aria-hidden="true">&raquo;&raquo;</span><span class="sr-only">마지막 페이지</span></a>
                            </li>
                        </ul>
                        <div class="clearfix"></div>
                    </nav>
                </div>
            </div>
        </section>
    </section>
</div>

<script>
    function goPage(pageNo){
        document.deptSearch.pageNo.value = pageNo;
        document.deptSearch.submit();
    }

    $("input:submit").click(function(){
       $("input[name='pageNo']").val(1);
    });

</script>
</body>

</html>